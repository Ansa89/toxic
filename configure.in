# Public domain
#
# This is a BSDBuild configure script source. The ./configure script is
# generated from this file via mkconfigure(1). For more information, see:
# http://bsdbuild.hypertriton.com/.
#

PACKAGE("Toxic")
VERSION("0.3.1")

REGISTER_SECTION("Toxic features")
REGISTER("--disable-av",		"Disables calling [no]")
REGISTER("--enable-apply-unixtime",		"Applies the unixtime patch")
REGISTER("--enable-revert-unixtime",           "Reverts the unixtime patch")
REGISTER_SECTION("paths")
REGISTER("--with-dependency-search=DIR",	"search for dependencies in DIR")
REGISTER("--with-libtoxcore=DIR",	"search for libtoxcore files in DIR")
REGISTER("--with-libsodium=DIR",	"search for libsodium files in DIR")
REGISTER("--with-libtoxav=DIR",	"search for libtoxav files in DIR")

REQUIRE(cc)
#CHECK(curses)
REQUIRE(sodium)
REQUIRE(toxcore)

if [ "${enable_apply_unixtime}" = "yes" ]; then
	patch -p1 < fun/unixtime.patch
fi
if [ "${enable_revert_unixtime}" = "yes" ]; then
        patch -R -p1 < fun/unixtime.patch
fi

if [ "${enable_av}" != "yes" ]; then
	HDEFINE(_SUPPORT_AUDIO,"yes")
	CHECK(toxav)
	CHECK(openal)
else
        HDEFINE(_SUPPORT_AUDIO,"no")
fi
